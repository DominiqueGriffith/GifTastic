<!-- pseudo code

1. Set up Giphy Ajax and API
2. Make sure gifs populate from Giphy via ajax/api
    2a. make sure to pull the rating as well.
    2b. set up functionality for gif to stop moving when click
3. Create search bar
    3a. Set up search funtionality
4. Create  an array of buttons (animals?)
    4a. append buttons to area


     -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <title>GifTastic</title>
</head>

<body>
    <div class="form-group">
        <label for="search">Add an animal:</label>
        <input type="text" class="form-control" id="search-term" value="">
        <button id="search-button">Submit</button>
    </div>

    <div id="buttons-appear-here"></div>



    <!-- <button data-search="Will Smith">Will Smith</button> -->
    <!-- src="assets/javascript/giftastic.js" -->
    <div id="gifs-appear-here"></div>

    <script type="text/javascript">

        $(document).ready(function () {




            var animals = ["bear", "cat", "duck", "tiger", "elephant", "rabbit", "wolf", "horse"];




            for (var i = 0; i < animals.length; i++) {

                var animalBtn = $("<button>");




                animalBtn.attr("data-search", animals[i]);
                animalBtn.addClass("animalBtn")




                animalBtn.text(animals[i]);


                $("#buttons-appear-here").prepend(animalBtn);




            }


            $("#search-button").on("click", function () {
                animals.push(document.getElementById("search-term").value);

               

                    var iAnimalBtn = $("<button>");




                    iAnimalBtn.attr("data-search", animals[animals.length-1]);
                    // NEED TO FIND A WAY TO GET ARRAY LENGTH TO PULL THE STING NOT THE INDEX NUMBER
                    // NEED TO FIGURE OUT A WAY THAT THE GIF SEARCH WORKS ON THE NEW ARRAY ITEM
                        




                    iAnimalBtn.text(animals[animals.length-1]);


                    $("#buttons-appear-here").prepend(iAnimalBtn);


            });





            $(".animalBtn").on("click", function () {
                var animal = $(this).data("search");
                var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
                    animal + "&api_key=ZhwJGcq4jvjAYEvclbztW3aiebLXiUQz&limit=10";
                console.log(queryURL);
                $.ajax({
                    url: queryURL,
                    method: "GET"
                }).then(function (response) {

                    console.log(response);







                    var results = response.data;



                    for (var i = 0; i < results.length; i++) {



                        if (results[i].rating !== "r" && results[i].rating !== "pg-13") {

                            var gifDiv = $("<div>");

                            var rating = results[i].rating;

                            var p = $("<p>").text("Rating: " + rating);



                            var animalImage = $("<img>");

                            animalImage.attr("src", results[i].images.fixed_height.url);

                            gifDiv.append(p);
                            gifDiv.append(animalImage);


                            $("#gifs-appear-here").prepend(gifDiv);
                        }


                    }


                });

            });



        });


    </script>
</body>

</html>